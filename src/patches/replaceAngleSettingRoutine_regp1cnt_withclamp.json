[
	{
		"patchDescription": "Replaces the shooter angle setting routine with a value derived from p1 input"
	},
	{
		"description": "Replaces the routine",
		"address": "2f602",
		"patchAsm": [
			"move.l A4,D0 ; save A4, as the game needs it",
			"movea.l #$300000,A4 ; load REG_P1CNT into A4",
			"move.b (A4),D1 ; read the current state of p1 input into D1",
			"not.b D1 ; flip the input, as low is active",
			"move.b #$0f,d2 ; load 0xf into d2 for the and instruction",
			"and.b d2,d1 ; clear out the top four bits",
			"cmpi.b #60, D1 ; compare D1 to 60",
			"ble.s skipUpperClamp ; is it less than 60? no need to apply upper clamp",
			"move.w #60, D1 ; it is too big, clamp it down to 60",
			"skipUpperClamp:",
			"cmpi.w #-60, D1 ; compare D1 to -60",
			"bge skipLowerClamp ; is it greater than -60? no need to apply lower clamp",
			"move.w #-60, D1 ; it is too small, clamp it up to -60",
			"skipLowerClamp:",
			"movea.l #$108262,A4 ; have A4 point to the angle memory address",
			"move.w D1,(A4) ; put D1 which is now (-60,60) as the angle",
			"movea.l D0,A4 ; restore A4 as the game needs it",
			"rts"
		]
	}
]
